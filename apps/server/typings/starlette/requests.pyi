"""
This type stub file was generated by basedpyright.

Must be updated on dependency updates.
"""

from collections.abc import AsyncGenerator, Iterator, Mapping
from typing import TYPE_CHECKING, Any, NoReturn

from starlette._utils import AwaitableOrContextManager
from starlette.datastructures import URL, Address, FormData, Headers, QueryParams, State
from starlette.types import Message, Receive, Scope, Send

if TYPE_CHECKING:
    from fastapi import FastAPI
else: ...
SERVER_PUSH_HEADERS_TO_COPY = ...

def cookie_parser(cookie_string: str) -> dict[str, str]:
    """
    This function parses a ``Cookie`` HTTP header into a dict of key/value pairs.

    It attempts to mimic browser cookie parsing behavior: browsers and web servers
    frequently disregard the spec (RFC 6265) when setting and reading cookies,
    so we attempt to suit the common scenarios here.

    This function has been adapted from Django 3.1.0.
    Note: we are explicitly _NOT_ using `SimpleCookie.load` because it is based
    on an outdated spec and will fail on lots of input we want to support
    """
    ...

class ClientDisconnect(Exception): ...

class HTTPConnection(Mapping[str, Any]):
    """
    A base class for incoming HTTP connections, that is used to provide
    any functionality that is common to both `Request` and `WebSocket`.
    """
    def __init__(self, scope: Scope, receive: Receive | None = ...) -> None: ...
    def __getitem__(self, key: str) -> Any: ...
    def __iter__(self) -> Iterator[str]: ...
    def __len__(self) -> int: ...

    __eq__ = ...
    __hash__ = ...
    @property
    def app(self) -> FastAPI: ...  #! MODOFIED LINE
    @property
    def url(self) -> URL: ...
    @property
    def base_url(self) -> URL: ...
    @property
    def headers(self) -> Headers: ...
    @property
    def query_params(self) -> QueryParams: ...
    @property
    def path_params(self) -> dict[str, Any]: ...
    @property
    def cookies(self) -> dict[str, str]: ...
    @property
    def client(self) -> Address | None: ...
    @property
    def session(self) -> dict[str, Any]: ...
    @property
    def auth(self) -> Any: ...
    @property
    def user(self) -> Any: ...
    @property
    def state(self) -> State: ...
    def url_for(self, name: str, /, **path_params: Any) -> URL: ...

async def empty_receive() -> NoReturn: ...
async def empty_send(message: Message) -> NoReturn: ...

class Request(HTTPConnection):
    _form: FormData | None
    def __init__(
        self, scope: Scope, receive: Receive = ..., send: Send = ...
    ) -> None: ...
    @property
    def method(self) -> str: ...
    @property
    def receive(self) -> Receive: ...
    async def stream(self) -> AsyncGenerator[bytes, None]: ...
    async def body(self) -> bytes: ...
    async def json(self) -> Any: ...
    def form(
        self,
        *,
        max_files: int | float = ...,
        max_fields: int | float = ...,
        max_part_size: int = ...,
    ) -> AwaitableOrContextManager[FormData]: ...
    async def close(self) -> None: ...
    async def is_disconnected(self) -> bool: ...
    async def send_push_promise(self, path: str) -> None: ...
